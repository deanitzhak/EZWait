function cov_87sq4ojp3(){var path="C:\\Studies\\systenD\\EZWait\\service\\scheduler.js";var hash="d5e4497ced5485ed6177e516cc857be37fb2187e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Studies\\systenD\\EZWait\\service\\scheduler.js",statementMap:{"0":{start:{line:1,column:27},end:{line:1,column:71}},"1":{start:{line:2,column:17},end:{line:2,column:52}},"2":{start:{line:3,column:21},end:{line:3,column:39}},"3":{start:{line:4,column:18},end:{line:4,column:50}},"4":{start:{line:6,column:15},end:{line:6,column:32}},"5":{start:{line:7,column:20},end:{line:7,column:30}},"6":{start:{line:10,column:17},end:{line:14,column:1}},"7":{start:{line:15,column:0},end:{line:133,column:2}},"8":{start:{line:17,column:8},end:{line:66,column:9}},"9":{start:{line:18,column:12},end:{line:18,column:33}},"10":{start:{line:19,column:36},end:{line:19,column:72}},"11":{start:{line:20,column:28},end:{line:20,column:62}},"12":{start:{line:21,column:30},end:{line:21,column:69}},"13":{start:{line:22,column:25},end:{line:22,column:59}},"14":{start:{line:23,column:25},end:{line:23,column:59}},"15":{start:{line:24,column:44},end:{line:24,column:89}},"16":{start:{line:25,column:42},end:{line:25,column:81}},"17":{start:{line:27,column:26},end:{line:27,column:43}},"18":{start:{line:28,column:27},end:{line:28,column:57}},"19":{start:{line:29,column:37},end:{line:29,column:84}},"20":{start:{line:33,column:12},end:{line:35,column:13}},"21":{start:{line:34,column:16},end:{line:34,column:57}},"22":{start:{line:36,column:30},end:{line:36,column:81}},"23":{start:{line:37,column:12},end:{line:39,column:13}},"24":{start:{line:38,column:16},end:{line:38,column:53}},"25":{start:{line:40,column:31},end:{line:40,column:63}},"26":{start:{line:42,column:12},end:{line:44,column:13}},"27":{start:{line:43,column:16},end:{line:43,column:57}},"28":{start:{line:45,column:28},end:{line:45,column:102}},"29":{start:{line:46,column:12},end:{line:48,column:13}},"30":{start:{line:47,column:16},end:{line:47,column:56}},"31":{start:{line:49,column:34},end:{line:49,column:48}},"32":{start:{line:50,column:35},end:{line:50,column:117}},"33":{start:{line:52,column:12},end:{line:52,column:46}},"34":{start:{line:53,column:12},end:{line:53,column:32}},"35":{start:{line:54,column:12},end:{line:54,column:60}},"36":{start:{line:55,column:12},end:{line:62,column:13}},"37":{start:{line:56,column:16},end:{line:56,column:32}},"38":{start:{line:57,column:16},end:{line:57,column:37}},"39":{start:{line:58,column:16},end:{line:58,column:55}},"40":{start:{line:60,column:16},end:{line:60,column:108}},"41":{start:{line:61,column:16},end:{line:61,column:55}},"42":{start:{line:64,column:12},end:{line:64,column:71}},"43":{start:{line:65,column:12},end:{line:65,column:69}},"44":{start:{line:70,column:8},end:{line:118,column:9}},"45":{start:{line:71,column:33},end:{line:71,column:66}},"46":{start:{line:72,column:40},end:{line:72,column:82}},"47":{start:{line:73,column:28},end:{line:73,column:44}},"48":{start:{line:74,column:28},end:{line:74,column:47}},"49":{start:{line:75,column:30},end:{line:75,column:54}},"50":{start:{line:76,column:25},end:{line:76,column:44}},"51":{start:{line:77,column:45},end:{line:77,column:90}},"52":{start:{line:78,column:43},end:{line:78,column:86}},"53":{start:{line:79,column:37},end:{line:79,column:84}},"54":{start:{line:80,column:32},end:{line:80,column:42}},"55":{start:{line:81,column:29},end:{line:81,column:46}},"56":{start:{line:82,column:33},end:{line:82,column:50}},"57":{start:{line:83,column:27},end:{line:83,column:64}},"58":{start:{line:84,column:33},end:{line:84,column:89}},"59":{start:{line:85,column:31},end:{line:85,column:57}},"60":{start:{line:86,column:12},end:{line:90,column:13}},"61":{start:{line:87,column:16},end:{line:89,column:17}},"62":{start:{line:88,column:20},end:{line:88,column:76}},"63":{start:{line:91,column:32},end:{line:91,column:100}},"64":{start:{line:92,column:12},end:{line:94,column:13}},"65":{start:{line:93,column:16},end:{line:93,column:80}},"66":{start:{line:95,column:38},end:{line:95,column:70}},"67":{start:{line:96,column:28},end:{line:96,column:113}},"68":{start:{line:97,column:12},end:{line:99,column:13}},"69":{start:{line:98,column:16},end:{line:98,column:56}},"70":{start:{line:102,column:50},end:{line:102,column:141}},"71":{start:{line:103,column:16},end:{line:103,column:71}},"72":{start:{line:104,column:16},end:{line:104,column:81}},"73":{start:{line:105,column:16},end:{line:105,column:56}},"74":{start:{line:106,column:16},end:{line:113,column:17}},"75":{start:{line:107,column:20},end:{line:107,column:115}},"76":{start:{line:108,column:20},end:{line:108,column:42}},"77":{start:{line:111,column:20},end:{line:111,column:115}},"78":{start:{line:112,column:20},end:{line:112,column:128}},"79":{start:{line:114,column:16},end:{line:114,column:43}},"80":{start:{line:116,column:12},end:{line:116,column:68}},"81":{start:{line:117,column:12},end:{line:117,column:69}},"82":{start:{line:122,column:8},end:{line:131,column:9}},"83":{start:{line:123,column:33},end:{line:123,column:41}},"84":{start:{line:124,column:34},end:{line:124,column:73}},"85":{start:{line:125,column:25},end:{line:125,column:51}},"86":{start:{line:126,column:31},end:{line:126,column:121}},"87":{start:{line:127,column:12},end:{line:127,column:44}},"88":{start:{line:129,column:12},end:{line:129,column:65}},"89":{start:{line:130,column:12},end:{line:130,column:69}},"90":{start:{line:135,column:4},end:{line:135,column:119}},"91":{start:{line:135,column:64},end:{line:135,column:117}},"92":{start:{line:141,column:16},end:{line:141,column:33}},"93":{start:{line:142,column:18},end:{line:142,column:40}},"94":{start:{line:143,column:17},end:{line:143,column:38}},"95":{start:{line:144,column:19},end:{line:144,column:71}},"96":{start:{line:146,column:4},end:{line:149,column:5}},"97":{start:{line:147,column:8},end:{line:147,column:56}},"98":{start:{line:148,column:8},end:{line:148,column:28}},"99":{start:{line:150,column:4},end:{line:150,column:20}},"100":{start:{line:153,column:62},end:{line:153,column:83}},"101":{start:{line:154,column:4},end:{line:156,column:5}},"102":{start:{line:155,column:8},end:{line:155,column:49}},"103":{start:{line:157,column:0},end:{line:157,column:12}},"104":{start:{line:160,column:25},end:{line:160,column:80}},"105":{start:{line:161,column:23},end:{line:161,column:76}},"106":{start:{line:162,column:4},end:{line:168,column:5}},"107":{start:{line:163,column:47},end:{line:163,column:56}},"108":{start:{line:164,column:24},end:{line:164,column:95}},"109":{start:{line:165,column:8},end:{line:167,column:9}},"110":{start:{line:166,column:12},end:{line:166,column:52}},"111":{start:{line:169,column:4},end:{line:169,column:16}},"112":{start:{line:172,column:18},end:{line:172,column:53}},"113":{start:{line:173,column:20},end:{line:173,column:57}},"114":{start:{line:174,column:27},end:{line:174,column:59}},"115":{start:{line:175,column:29},end:{line:175,column:67}},"116":{start:{line:176,column:29},end:{line:176,column:68}},"117":{start:{line:177,column:4},end:{line:177,column:27}},"118":{start:{line:181,column:17},end:{line:181,column:32}},"119":{start:{line:182,column:37},end:{line:182,column:64}},"120":{start:{line:183,column:4},end:{line:183,column:32}},"121":{start:{line:184,column:4},end:{line:184,column:36}},"122":{start:{line:185,column:20},end:{line:185,column:34}},"123":{start:{line:186,column:4},end:{line:186,column:19}},"124":{start:{line:189,column:4},end:{line:189,column:39}},"125":{start:{line:190,column:17},end:{line:190,column:32}},"126":{start:{line:191,column:37},end:{line:191,column:69}},"127":{start:{line:192,column:4},end:{line:192,column:32}},"128":{start:{line:193,column:4},end:{line:193,column:36}},"129":{start:{line:194,column:20},end:{line:194,column:55}},"130":{start:{line:195,column:4},end:{line:195,column:37}},"131":{start:{line:196,column:4},end:{line:196,column:19}},"132":{start:{line:199,column:17},end:{line:199,column:37}},"133":{start:{line:200,column:4},end:{line:200,column:43}},"134":{start:{line:201,column:4},end:{line:201,column:30}},"135":{start:{line:205,column:4},end:{line:214,column:5}},"136":{start:{line:207,column:12},end:{line:207,column:38}},"137":{start:{line:209,column:12},end:{line:209,column:38}},"138":{start:{line:211,column:12},end:{line:211,column:38}},"139":{start:{line:213,column:12},end:{line:213,column:21}},"140":{start:{line:217,column:24},end:{line:233,column:6}},"141":{start:{line:234,column:4},end:{line:234,column:23}},"142":{start:{line:237,column:27},end:{line:241,column:5}},"143":{start:{line:242,column:4},end:{line:242,column:26}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:16,column:4},end:{line:16,column:5}},loc:{start:{line:16,column:43},end:{line:67,column:5}},line:16},"1":{name:"(anonymous_1)",decl:{start:{line:68,column:4},end:{line:68,column:5}},loc:{start:{line:69,column:4},end:{line:119,column:5}},line:69},"2":{name:"(anonymous_2)",decl:{start:{line:120,column:4},end:{line:120,column:5}},loc:{start:{line:121,column:4},end:{line:132,column:5}},line:121},"3":{name:"isAppointmentIdInSchedule",decl:{start:{line:134,column:9},end:{line:134,column:34}},loc:{start:{line:134,column:66},end:{line:136,column:1}},line:134},"4":{name:"(anonymous_4)",decl:{start:{line:135,column:49},end:{line:135,column:50}},loc:{start:{line:135,column:64},end:{line:135,column:117}},line:135},"5":{name:"getScheduleByDate",decl:{start:{line:139,column:15},end:{line:139,column:32}},loc:{start:{line:140,column:0},end:{line:151,column:1}},line:140},"6":{name:"checkValidTime",decl:{start:{line:152,column:9},end:{line:152,column:23}},loc:{start:{line:152,column:60},end:{line:158,column:1}},line:152},"7":{name:"checkTakenTime",decl:{start:{line:159,column:9},end:{line:159,column:23}},loc:{start:{line:159,column:86},end:{line:170,column:1}},line:159},"8":{name:"getFormattedDateEndTime",decl:{start:{line:171,column:9},end:{line:171,column:32}},loc:{start:{line:171,column:55},end:{line:178,column:1}},line:171},"9":{name:"combineDateAndHoursToDate",decl:{start:{line:179,column:9},end:{line:179,column:34}},loc:{start:{line:180,column:0},end:{line:187,column:1}},line:180},"10":{name:"calculateDuration",decl:{start:{line:188,column:9},end:{line:188,column:26}},loc:{start:{line:188,column:51},end:{line:197,column:1}},line:188},"11":{name:"addHoursToDate",decl:{start:{line:198,column:9},end:{line:198,column:23}},loc:{start:{line:198,column:43},end:{line:202,column:1}},line:198},"12":{name:"getDurationByType",decl:{start:{line:204,column:9},end:{line:204,column:26}},loc:{start:{line:204,column:33},end:{line:215,column:1}},line:204},"13":{name:"createDefultSchedule",decl:{start:{line:216,column:9},end:{line:216,column:29}},loc:{start:{line:216,column:48},end:{line:235,column:1}},line:216},"14":{name:"createNewAppointmentScheduleFormat",decl:{start:{line:236,column:9},end:{line:236,column:43}},loc:{start:{line:236,column:92},end:{line:243,column:1}},line:236}},branchMap:{"0":{loc:{start:{line:33,column:12},end:{line:35,column:13}},type:"if",locations:[{start:{line:33,column:12},end:{line:35,column:13}},{start:{line:33,column:12},end:{line:35,column:13}}],line:33},"1":{loc:{start:{line:37,column:12},end:{line:39,column:13}},type:"if",locations:[{start:{line:37,column:12},end:{line:39,column:13}},{start:{line:37,column:12},end:{line:39,column:13}}],line:37},"2":{loc:{start:{line:42,column:12},end:{line:44,column:13}},type:"if",locations:[{start:{line:42,column:12},end:{line:44,column:13}},{start:{line:42,column:12},end:{line:44,column:13}}],line:42},"3":{loc:{start:{line:46,column:12},end:{line:48,column:13}},type:"if",locations:[{start:{line:46,column:12},end:{line:48,column:13}},{start:{line:46,column:12},end:{line:48,column:13}}],line:46},"4":{loc:{start:{line:55,column:12},end:{line:62,column:13}},type:"if",locations:[{start:{line:55,column:12},end:{line:62,column:13}},{start:{line:55,column:12},end:{line:62,column:13}}],line:55},"5":{loc:{start:{line:86,column:12},end:{line:90,column:13}},type:"if",locations:[{start:{line:86,column:12},end:{line:90,column:13}},{start:{line:86,column:12},end:{line:90,column:13}}],line:86},"6":{loc:{start:{line:87,column:16},end:{line:89,column:17}},type:"if",locations:[{start:{line:87,column:16},end:{line:89,column:17}},{start:{line:87,column:16},end:{line:89,column:17}}],line:87},"7":{loc:{start:{line:92,column:12},end:{line:94,column:13}},type:"if",locations:[{start:{line:92,column:12},end:{line:94,column:13}},{start:{line:92,column:12},end:{line:94,column:13}}],line:92},"8":{loc:{start:{line:97,column:12},end:{line:99,column:13}},type:"if",locations:[{start:{line:97,column:12},end:{line:99,column:13}},{start:{line:97,column:12},end:{line:99,column:13}}],line:97},"9":{loc:{start:{line:106,column:16},end:{line:113,column:17}},type:"if",locations:[{start:{line:106,column:16},end:{line:113,column:17}},{start:{line:106,column:16},end:{line:113,column:17}}],line:106},"10":{loc:{start:{line:146,column:4},end:{line:149,column:5}},type:"if",locations:[{start:{line:146,column:4},end:{line:149,column:5}},{start:{line:146,column:4},end:{line:149,column:5}}],line:146},"11":{loc:{start:{line:154,column:4},end:{line:156,column:5}},type:"if",locations:[{start:{line:154,column:4},end:{line:156,column:5}},{start:{line:154,column:4},end:{line:156,column:5}}],line:154},"12":{loc:{start:{line:154,column:8},end:{line:154,column:128}},type:"binary-expr",locations:[{start:{line:154,column:8},end:{line:154,column:33}},{start:{line:154,column:37},end:{line:154,column:66}},{start:{line:154,column:70},end:{line:154,column:97}},{start:{line:154,column:101},end:{line:154,column:127}}],line:154},"13":{loc:{start:{line:165,column:8},end:{line:167,column:9}},type:"if",locations:[{start:{line:165,column:8},end:{line:167,column:9}},{start:{line:165,column:8},end:{line:167,column:9}}],line:165},"14":{loc:{start:{line:165,column:12},end:{line:165,column:82}},type:"binary-expr",locations:[{start:{line:165,column:12},end:{line:165,column:42}},{start:{line:165,column:46},end:{line:165,column:82}}],line:165},"15":{loc:{start:{line:174,column:27},end:{line:174,column:59}},type:"cond-expr",locations:[{start:{line:174,column:40},end:{line:174,column:51}},{start:{line:174,column:54},end:{line:174,column:59}}],line:174},"16":{loc:{start:{line:175,column:29},end:{line:175,column:67}},type:"cond-expr",locations:[{start:{line:175,column:44},end:{line:175,column:57}},{start:{line:175,column:60},end:{line:175,column:67}}],line:175},"17":{loc:{start:{line:205,column:4},end:{line:214,column:5}},type:"switch",locations:[{start:{line:206,column:8},end:{line:207,column:38}},{start:{line:208,column:8},end:{line:209,column:38}},{start:{line:210,column:8},end:{line:211,column:38}},{start:{line:212,column:8},end:{line:213,column:21}}],line:205}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0,0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0,0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d5e4497ced5485ed6177e516cc857be37fb2187e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_87sq4ojp3=function(){return actualCoverage;};}return actualCoverage;}cov_87sq4ojp3();const ScheduleRepository=(cov_87sq4ojp3().s[0]++,require('../repository/schedule.repository'));const Schedule=(cov_87sq4ojp3().s[1]++,require('../models/schedule.model'));const{ObjectId}=(cov_87sq4ojp3().s[2]++,require("mongodb"));const schedRepo=(cov_87sq4ojp3().s[3]++,new ScheduleRepository(Schedule));let duration;const moment=(cov_87sq4ojp3().s[4]++,require('moment'));const currentDate=(cov_87sq4ojp3().s[5]++,new Date());/*this flag is indicate if a new day is opend or not*/let defultCreate;const EnumType=(cov_87sq4ojp3().s[6]++,{VALUE1:"1",VALUE2:"2",VALUE3:"3"});cov_87sq4ojp3().s[7]++;module.exports={async scheduleNewAppointment(req,res){cov_87sq4ojp3().f[0]++;cov_87sq4ojp3().s[8]++;try{cov_87sq4ojp3().s[9]++;defultCreate=false;let newAppointmentObj=(cov_87sq4ojp3().s[10]++,JSON.parse(req.query.newAppointment));const dateStr=(cov_87sq4ojp3().s[11]++,newAppointmentObj.Appointment.date);const startTime=(cov_87sq4ojp3().s[12]++,newAppointmentObj.Appointment.startTime);const date=(cov_87sq4ojp3().s[13]++,newAppointmentObj.Appointment.date);const type=(cov_87sq4ojp3().s[14]++,newAppointmentObj.Appointment.type);const newAppFormatedStartTime=(cov_87sq4ojp3().s[15]++,combineDateAndHoursToDate(startTime,dateStr));const newAppFormatedEndTime=(cov_87sq4ojp3().s[16]++,calculateDuration(startTime,type,date));/*get the schedule of the input day*/const _date=(cov_87sq4ojp3().s[17]++,new Date(dateStr));let schedule=(cov_87sq4ojp3().s[18]++,await getScheduleByDate(_date));const formattedEndTime=(cov_87sq4ojp3().s[19]++,getFormattedDateEndTime(newAppFormatedEndTime));/*if there is no appoontment so ther is no sched if the is no sech so create defult*/ /*get the start day and the end of working hours*/ /*cheking if the appointment is taken*/cov_87sq4ojp3().s[20]++;if(date<currentDate){cov_87sq4ojp3().b[0][0]++;cov_87sq4ojp3().s[21]++;throw new Error("Can't set appointment");}else{cov_87sq4ojp3().b[0][1]++;}const validTime=(cov_87sq4ojp3().s[22]++,checkValidTime(schedule,startTime,formattedEndTime));cov_87sq4ojp3().s[23]++;if(validTime!=true){cov_87sq4ojp3().b[1][0]++;cov_87sq4ojp3().s[24]++;throw new Error("Time is not valid");}else{cov_87sq4ojp3().b[1][1]++;}let appointments=(cov_87sq4ojp3().s[25]++,schedule.takenHours.appointments);/*formated to be able to compare*/cov_87sq4ojp3().s[26]++;if(newAppFormatedStartTime<currentDate){cov_87sq4ojp3().b[2][0]++;cov_87sq4ojp3().s[27]++;throw new Error("Can't set appointment");}else{cov_87sq4ojp3().b[2][1]++;}const isTaken=(cov_87sq4ojp3().s[28]++,checkTakenTime(appointments,newAppFormatedStartTime,newAppFormatedEndTime));cov_87sq4ojp3().s[29]++;if(isTaken!=true){cov_87sq4ojp3().b[3][0]++;cov_87sq4ojp3().s[30]++;throw new Error("appointment is taken");}else{cov_87sq4ojp3().b[3][1]++;}const appointmentId=(cov_87sq4ojp3().s[31]++,new ObjectId());const newAppointment=(cov_87sq4ojp3().s[32]++,createNewAppointmentScheduleFormat(newAppFormatedStartTime,duration,appointmentId));cov_87sq4ojp3().s[33]++;appointments.push(newAppointment);cov_87sq4ojp3().s[34]++;appointments.sort();cov_87sq4ojp3().s[35]++;schedule.takenHours.appointments=appointments;cov_87sq4ojp3().s[36]++;if(defultCreate){cov_87sq4ojp3().b[4][0]++;cov_87sq4ojp3().s[37]++;schedule.save();cov_87sq4ojp3().s[38]++;defultCreate=false;cov_87sq4ojp3().s[39]++;res.send(newAppointment.appointmentId);}else{cov_87sq4ojp3().b[4][1]++;cov_87sq4ojp3().s[40]++;schedRepo.updateScheduleValueTwoKeys(schedule._id,"takenHours","appointments",appointments);cov_87sq4ojp3().s[41]++;res.send(newAppointment.appointmentId);}}catch(error){cov_87sq4ojp3().s[42]++;console.error('Error processing appointment data:',error);cov_87sq4ojp3().s[43]++;res.status(500).json({error:'Internal Server Error'});}},async reScheduleNewAppointment(req,res){cov_87sq4ojp3().f[1]++;cov_87sq4ojp3().s[44]++;try{let newAppointment=(cov_87sq4ojp3().s[45]++,req.body.newRescheduleAppointment);const appointmentIdToFind=(cov_87sq4ojp3().s[46]++,new ObjectId(newAppointment.appointmentId));const oldDate=(cov_87sq4ojp3().s[47]++,req.body.oldDate);const dateStr=(cov_87sq4ojp3().s[48]++,newAppointment.date);const startTime=(cov_87sq4ojp3().s[49]++,newAppointment.startTime);const type=(cov_87sq4ojp3().s[50]++,newAppointment.type);const newAppFormattedStartTime=(cov_87sq4ojp3().s[51]++,combineDateAndHoursToDate(startTime,dateStr));const newAppFormattedEndTime=(cov_87sq4ojp3().s[52]++,calculateDuration(startTime,type,dateStr));const formattedEndTime=(cov_87sq4ojp3().s[53]++,getFormattedDateEndTime(newAppFormattedEndTime));const currentDate=(cov_87sq4ojp3().s[54]++,new Date());const _oldDate=(cov_87sq4ojp3().s[55]++,new Date(oldDate));const scheduleDate=(cov_87sq4ojp3().s[56]++,new Date(dateStr));let schedule=(cov_87sq4ojp3().s[57]++,await getScheduleByDate(scheduleDate));const isInSchedule=(cov_87sq4ojp3().s[58]++,isAppointmentIdInSchedule(appointmentIdToFind,schedule));const isPastDate=(cov_87sq4ojp3().s[59]++,scheduleDate<currentDate);cov_87sq4ojp3().s[60]++;if(isInSchedule){cov_87sq4ojp3().b[5][0]++;cov_87sq4ojp3().s[61]++;if(isPastDate){cov_87sq4ojp3().b[6][0]++;cov_87sq4ojp3().s[62]++;throw new Error("Can't set appointment for past dates");}else{cov_87sq4ojp3().b[6][1]++;}}else{cov_87sq4ojp3().b[5][1]++;}const isValidTime=(cov_87sq4ojp3().s[63]++,checkValidTime(schedule,newAppFormattedStartTime,formattedEndTime));cov_87sq4ojp3().s[64]++;if(!isValidTime){cov_87sq4ojp3().b[7][0]++;cov_87sq4ojp3().s[65]++;throw new Error("Appointment time is invalid or already taken");}else{cov_87sq4ojp3().b[7][1]++;}let updatedAppointments=(cov_87sq4ojp3().s[66]++,schedule.takenHours.appointments);const isTaken=(cov_87sq4ojp3().s[67]++,checkTakenTime(updatedAppointments,newAppFormattedStartTime,newAppFormattedEndTime));cov_87sq4ojp3().s[68]++;if(!isTaken){cov_87sq4ojp3().b[8][0]++;cov_87sq4ojp3().s[69]++;throw new Error("Appointment is taken");}else{cov_87sq4ojp3().b[8][1]++;}/*remove from old Schedule */ /*Update appointment*/const newRescheduledAppointment=(cov_87sq4ojp3().s[70]++,createNewAppointmentScheduleFormat(newAppFormattedStartTime,duration,appointmentIdToFind));cov_87sq4ojp3().s[71]++;schedule.takenHours.appointments=updatedAppointments;cov_87sq4ojp3().s[72]++;schedule.takenHours.appointments.push(newRescheduledAppointment);cov_87sq4ojp3().s[73]++;schedule.takenHours.appointments.sort();cov_87sq4ojp3().s[74]++;if(defultCreate){cov_87sq4ojp3().b[9][0]++;cov_87sq4ojp3().s[75]++;schedRepo.removeAppointmentFromScheduleByAttributeAppointmentId(appointmentIdToFind,_oldDate);cov_87sq4ojp3().s[76]++;await schedule.save();}else{cov_87sq4ojp3().b[9][1]++;cov_87sq4ojp3().s[77]++;/*update new Schedule*/schedRepo.removeAppointmentFromScheduleByAttributeAppointmentId(appointmentIdToFind,_oldDate);cov_87sq4ojp3().s[78]++;await schedRepo.updateScheduleValueTwoKeys(schedule._id,"takenHours","appointments",updatedAppointments);}cov_87sq4ojp3().s[79]++;res.status(200).send(true);}catch(error){cov_87sq4ojp3().s[80]++;console.error('Error rescheduling appointment:',error);cov_87sq4ojp3().s[81]++;res.status(500).json({error:'Internal Server Error'});}},async cancelAppointmentById(req,res){cov_87sq4ojp3().f[2]++;cov_87sq4ojp3().s[82]++;try{const appointment=(cov_87sq4ojp3().s[83]++,req.body);const appointmentId=(cov_87sq4ojp3().s[84]++,new ObjectId(appointment.appointmentId));const date=(cov_87sq4ojp3().s[85]++,new Date(appointment.date));const isDeleted=(cov_87sq4ojp3().s[86]++,await schedRepo.removeAppointmentFromScheduleByAttributeAppointmentId(appointmentId,date));cov_87sq4ojp3().s[87]++;res.status(200).send(isDeleted);}catch(error){cov_87sq4ojp3().s[88]++;console.error('Error canceling appointment:',error);cov_87sq4ojp3().s[89]++;res.status(500).json({error:'Internal Server Error'});}}};function isAppointmentIdInSchedule(appointmentIdToFind,schedule){cov_87sq4ojp3().f[3]++;cov_87sq4ojp3().s[90]++;return schedule.takenHours.appointments.some(appointment=>{cov_87sq4ojp3().f[4]++;cov_87sq4ojp3().s[91]++;return appointment.appointmentId.equals(appointmentIdToFind);});}async function getScheduleByDate(newDate){cov_87sq4ojp3().f[5]++;const day=(cov_87sq4ojp3().s[92]++,newDate.getDate());const month=(cov_87sq4ojp3().s[93]++,newDate.getMonth()+1);const year=(cov_87sq4ojp3().s[94]++,newDate.getFullYear());let schedule=(cov_87sq4ojp3().s[95]++,await schedRepo.findByDayMonthYear(day,month,year));/*if the schedule is exsist*/cov_87sq4ojp3().s[96]++;if(schedule===null){cov_87sq4ojp3().b[10][0]++;cov_87sq4ojp3().s[97]++;schedule=createDefultSchedule(day,month,year);cov_87sq4ojp3().s[98]++;defultCreate=true;}else{cov_87sq4ojp3().b[10][1]++;}cov_87sq4ojp3().s[99]++;return schedule;}function checkValidTime(schedule,startTime,formattedEndTime){cov_87sq4ojp3().f[6]++;const{startTime:defsStartTime,endTime:defEndTime}=(cov_87sq4ojp3().s[100]++,schedule.workingHours);cov_87sq4ojp3().s[101]++;if((cov_87sq4ojp3().b[12][0]++,startTime<defsStartTime)||(cov_87sq4ojp3().b[12][1]++,formattedEndTime>defEndTime)||(cov_87sq4ojp3().b[12][2]++,formattedEndTime>='00:00')&&(cov_87sq4ojp3().b[12][3]++,formattedEndTime<'05:00')){cov_87sq4ojp3().b[11][0]++;cov_87sq4ojp3().s[102]++;throw new Error("Can't set appointment");}else{cov_87sq4ojp3().b[11][1]++;}cov_87sq4ojp3().s[103]++;return true;}function checkTakenTime(appointments,newAppFormatedStartTime,newAppFormatedEndTime){cov_87sq4ojp3().f[7]++;const newStartTime=(cov_87sq4ojp3().s[104]++,moment(newAppFormatedStartTime,"YYYY-MM-DDTHH:mm:ssZ"));const newEndTime=(cov_87sq4ojp3().s[105]++,moment(newAppFormatedEndTime,"YYYY-MM-DDTHH:mm:ssZ"));cov_87sq4ojp3().s[106]++;for(const takenTime of appointments){const{startAppointment,duration}=(cov_87sq4ojp3().s[107]++,takenTime);const endTime=(cov_87sq4ojp3().s[108]++,moment(startAppointment,"YYYY-MM-DDTHH:mm:ssZ").add(duration,'hours'));cov_87sq4ojp3().s[109]++;if((cov_87sq4ojp3().b[14][0]++,newStartTime.isBefore(endTime))&&(cov_87sq4ojp3().b[14][1]++,newEndTime.isAfter(startAppointment))){cov_87sq4ojp3().b[13][0]++;cov_87sq4ojp3().s[110]++;throw new Error("Appointment is taken");}else{cov_87sq4ojp3().b[13][1]++;}}cov_87sq4ojp3().s[111]++;return true;}function getFormattedDateEndTime(newAppFormatedEndTime){cov_87sq4ojp3().f[8]++;const hours=(cov_87sq4ojp3().s[112]++,newAppFormatedEndTime.getUTCHours());const minutes=(cov_87sq4ojp3().s[113]++,newAppFormatedEndTime.getUTCMinutes());const formattedHours=(cov_87sq4ojp3().s[114]++,hours<10?(cov_87sq4ojp3().b[15][0]++,'0'+hours):(cov_87sq4ojp3().b[15][1]++,hours));const formattedMinutes=(cov_87sq4ojp3().s[115]++,minutes<10?(cov_87sq4ojp3().b[16][0]++,'0'+minutes):(cov_87sq4ojp3().b[16][1]++,minutes));const formattedEndTime=(cov_87sq4ojp3().s[116]++,`${formattedHours}:${formattedMinutes}`);cov_87sq4ojp3().s[117]++;return formattedEndTime;}function combineDateAndHoursToDate(time,_date){cov_87sq4ojp3().f[9]++;const date=(cov_87sq4ojp3().s[118]++,new Date(_date));const[startHour,startMinute]=(cov_87sq4ojp3().s[119]++,time.split(':').map(Number));cov_87sq4ojp3().s[120]++;date.setUTCHours(startHour);cov_87sq4ojp3().s[121]++;date.setUTCMinutes(startMinute);const newDate=(cov_87sq4ojp3().s[122]++,new Date(date));cov_87sq4ojp3().s[123]++;return newDate;}function calculateDuration(startTime,type,_date){cov_87sq4ojp3().f[10]++;cov_87sq4ojp3().s[124]++;duration=getDurationByType(type);// Duration in milliseconds
const date=(cov_87sq4ojp3().s[125]++,new Date(_date));const[startHour,startMinute]=(cov_87sq4ojp3().s[126]++,startTime.split(':').map(Number));cov_87sq4ojp3().s[127]++;date.setUTCHours(startHour);cov_87sq4ojp3().s[128]++;date.setUTCMinutes(startMinute);const endTime=(cov_87sq4ojp3().s[129]++,new Date(date.getTime()+duration));cov_87sq4ojp3().s[130]++;duration=duration/1000/60/60;cov_87sq4ojp3().s[131]++;return endTime;}function addHoursToDate(dateString,hours){cov_87sq4ojp3().f[11]++;const date=(cov_87sq4ojp3().s[132]++,new Date(dateString));cov_87sq4ojp3().s[133]++;date.setHours(date.getHours()+hours);cov_87sq4ojp3().s[134]++;return date.toISOString();}function getDurationByType(type){cov_87sq4ojp3().f[12]++;cov_87sq4ojp3().s[135]++;switch(type){case EnumType.VALUE1:cov_87sq4ojp3().b[17][0]++;cov_87sq4ojp3().s[136]++;return 2*60*60*1000;// 2 hours in milliseconds
case EnumType.VALUE2:cov_87sq4ojp3().b[17][1]++;cov_87sq4ojp3().s[137]++;return 3*60*60*1000;case EnumType.VALUE3:cov_87sq4ojp3().b[17][2]++;cov_87sq4ojp3().s[138]++;return 1*60*60*1000;// 1 hour in milliseconds
default:cov_87sq4ojp3().b[17][3]++;cov_87sq4ojp3().s[139]++;return 0;// Default duration
}}function createDefultSchedule(_day,_month,_year){cov_87sq4ojp3().f[13]++;const newSchedule=(cov_87sq4ojp3().s[140]++,new Schedule({scheduleId:new ObjectId(),day:_day,month:_month,year:_year,workingHours:{startTime:'09:00',endTime:'18:00'},takenHours:{appointments:[{startAppointment:new Date().setHours(9,0,0),duration:0,appointmentId:new ObjectId()}]}}));cov_87sq4ojp3().s[141]++;return newSchedule;}function createNewAppointmentScheduleFormat(newAppFormatedStartTime,duration,appointmentId){cov_87sq4ojp3().f[14]++;const newAppointment=(cov_87sq4ojp3().s[142]++,{startAppointment:newAppFormatedStartTime,duration:duration,appointmentId:appointmentId});cov_87sq4ojp3().s[143]++;return newAppointment;}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfODdzcTRvanAzIiwiYWN0dWFsQ292ZXJhZ2UiLCJTY2hlZHVsZVJlcG9zaXRvcnkiLCJzIiwicmVxdWlyZSIsIlNjaGVkdWxlIiwiT2JqZWN0SWQiLCJzY2hlZFJlcG8iLCJkdXJhdGlvbiIsIm1vbWVudCIsImN1cnJlbnREYXRlIiwiRGF0ZSIsImRlZnVsdENyZWF0ZSIsIkVudW1UeXBlIiwiVkFMVUUxIiwiVkFMVUUyIiwiVkFMVUUzIiwibW9kdWxlIiwiZXhwb3J0cyIsInNjaGVkdWxlTmV3QXBwb2ludG1lbnQiLCJyZXEiLCJyZXMiLCJmIiwibmV3QXBwb2ludG1lbnRPYmoiLCJKU09OIiwicGFyc2UiLCJxdWVyeSIsIm5ld0FwcG9pbnRtZW50IiwiZGF0ZVN0ciIsIkFwcG9pbnRtZW50IiwiZGF0ZSIsInN0YXJ0VGltZSIsInR5cGUiLCJuZXdBcHBGb3JtYXRlZFN0YXJ0VGltZSIsImNvbWJpbmVEYXRlQW5kSG91cnNUb0RhdGUiLCJuZXdBcHBGb3JtYXRlZEVuZFRpbWUiLCJjYWxjdWxhdGVEdXJhdGlvbiIsIl9kYXRlIiwic2NoZWR1bGUiLCJnZXRTY2hlZHVsZUJ5RGF0ZSIsImZvcm1hdHRlZEVuZFRpbWUiLCJnZXRGb3JtYXR0ZWREYXRlRW5kVGltZSIsImIiLCJFcnJvciIsInZhbGlkVGltZSIsImNoZWNrVmFsaWRUaW1lIiwiYXBwb2ludG1lbnRzIiwidGFrZW5Ib3VycyIsImlzVGFrZW4iLCJjaGVja1Rha2VuVGltZSIsImFwcG9pbnRtZW50SWQiLCJjcmVhdGVOZXdBcHBvaW50bWVudFNjaGVkdWxlRm9ybWF0IiwicHVzaCIsInNvcnQiLCJzYXZlIiwic2VuZCIsInVwZGF0ZVNjaGVkdWxlVmFsdWVUd29LZXlzIiwiX2lkIiwiZXJyb3IiLCJjb25zb2xlIiwic3RhdHVzIiwianNvbiIsInJlU2NoZWR1bGVOZXdBcHBvaW50bWVudCIsImJvZHkiLCJuZXdSZXNjaGVkdWxlQXBwb2ludG1lbnQiLCJhcHBvaW50bWVudElkVG9GaW5kIiwib2xkRGF0ZSIsIm5ld0FwcEZvcm1hdHRlZFN0YXJ0VGltZSIsIm5ld0FwcEZvcm1hdHRlZEVuZFRpbWUiLCJfb2xkRGF0ZSIsInNjaGVkdWxlRGF0ZSIsImlzSW5TY2hlZHVsZSIsImlzQXBwb2ludG1lbnRJZEluU2NoZWR1bGUiLCJpc1Bhc3REYXRlIiwiaXNWYWxpZFRpbWUiLCJ1cGRhdGVkQXBwb2ludG1lbnRzIiwibmV3UmVzY2hlZHVsZWRBcHBvaW50bWVudCIsInJlbW92ZUFwcG9pbnRtZW50RnJvbVNjaGVkdWxlQnlBdHRyaWJ1dGVBcHBvaW50bWVudElkIiwiY2FuY2VsQXBwb2ludG1lbnRCeUlkIiwiYXBwb2ludG1lbnQiLCJpc0RlbGV0ZWQiLCJzb21lIiwiZXF1YWxzIiwibmV3RGF0ZSIsImRheSIsImdldERhdGUiLCJtb250aCIsImdldE1vbnRoIiwieWVhciIsImdldEZ1bGxZZWFyIiwiZmluZEJ5RGF5TW9udGhZZWFyIiwiY3JlYXRlRGVmdWx0U2NoZWR1bGUiLCJkZWZzU3RhcnRUaW1lIiwiZW5kVGltZSIsImRlZkVuZFRpbWUiLCJ3b3JraW5nSG91cnMiLCJuZXdTdGFydFRpbWUiLCJuZXdFbmRUaW1lIiwidGFrZW5UaW1lIiwic3RhcnRBcHBvaW50bWVudCIsImFkZCIsImlzQmVmb3JlIiwiaXNBZnRlciIsImhvdXJzIiwiZ2V0VVRDSG91cnMiLCJtaW51dGVzIiwiZ2V0VVRDTWludXRlcyIsImZvcm1hdHRlZEhvdXJzIiwiZm9ybWF0dGVkTWludXRlcyIsInRpbWUiLCJzdGFydEhvdXIiLCJzdGFydE1pbnV0ZSIsInNwbGl0IiwibWFwIiwiTnVtYmVyIiwic2V0VVRDSG91cnMiLCJzZXRVVENNaW51dGVzIiwiZ2V0RHVyYXRpb25CeVR5cGUiLCJnZXRUaW1lIiwiYWRkSG91cnNUb0RhdGUiLCJkYXRlU3RyaW5nIiwic2V0SG91cnMiLCJnZXRIb3VycyIsInRvSVNPU3RyaW5nIiwiX2RheSIsIl9tb250aCIsIl95ZWFyIiwibmV3U2NoZWR1bGUiLCJzY2hlZHVsZUlkIl0sInNvdXJjZXMiOlsic2NoZWR1bGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNjaGVkdWxlUmVwb3NpdG9yeSA9IHJlcXVpcmUoJy4uL3JlcG9zaXRvcnkvc2NoZWR1bGUucmVwb3NpdG9yeScpO1xyXG5jb25zdCBTY2hlZHVsZSA9IHJlcXVpcmUoJy4uL21vZGVscy9zY2hlZHVsZS5tb2RlbCcpO1xyXG5jb25zdCB7IE9iamVjdElkIH0gPSByZXF1aXJlKFwibW9uZ29kYlwiKTtcclxuY29uc3Qgc2NoZWRSZXBvID0gbmV3IFNjaGVkdWxlUmVwb3NpdG9yeShTY2hlZHVsZSk7XHJcbmxldCBkdXJhdGlvbjtcclxuY29uc3QgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XHJcbmNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuLyp0aGlzIGZsYWcgaXMgaW5kaWNhdGUgaWYgYSBuZXcgZGF5IGlzIG9wZW5kIG9yIG5vdCovXHJcbmxldCBkZWZ1bHRDcmVhdGU7IFxyXG5jb25zdCBFbnVtVHlwZSA9IHtcclxuICAgIFZBTFVFMTogXCIxXCIsXHJcbiAgICBWQUxVRTI6IFwiMlwiLFxyXG4gICAgVkFMVUUzOiBcIjNcIixcclxufTtcclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBhc3luYyBzY2hlZHVsZU5ld0FwcG9pbnRtZW50KHJlcSwgcmVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZGVmdWx0Q3JlYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGxldCBuZXdBcHBvaW50bWVudE9iaiA9IEpTT04ucGFyc2UocmVxLnF1ZXJ5Lm5ld0FwcG9pbnRtZW50KTtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IG5ld0FwcG9pbnRtZW50T2JqLkFwcG9pbnRtZW50LmRhdGU7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IG5ld0FwcG9pbnRtZW50T2JqLkFwcG9pbnRtZW50LnN0YXJ0VGltZTsgXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXdBcHBvaW50bWVudE9iai5BcHBvaW50bWVudC5kYXRlO1xyXG4gICAgICAgICAgICBjb25zdCB0eXBlID0gbmV3QXBwb2ludG1lbnRPYmouQXBwb2ludG1lbnQudHlwZTtcclxuICAgICAgICAgICAgY29uc3QgbmV3QXBwRm9ybWF0ZWRTdGFydFRpbWUgPSBjb21iaW5lRGF0ZUFuZEhvdXJzVG9EYXRlKHN0YXJ0VGltZSAsZGF0ZVN0cik7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0FwcEZvcm1hdGVkRW5kVGltZSA9IGNhbGN1bGF0ZUR1cmF0aW9uKHN0YXJ0VGltZSwgdHlwZSxkYXRlKTtcclxuICAgICAgICAgICAgLypnZXQgdGhlIHNjaGVkdWxlIG9mIHRoZSBpbnB1dCBkYXkqL1xyXG4gICAgICAgICAgICBjb25zdCBfZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIpO1xyXG4gICAgICAgICAgICBsZXQgc2NoZWR1bGUgPSBhd2FpdCBnZXRTY2hlZHVsZUJ5RGF0ZShfZGF0ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZEVuZFRpbWUgPSBnZXRGb3JtYXR0ZWREYXRlRW5kVGltZSAobmV3QXBwRm9ybWF0ZWRFbmRUaW1lKTtcclxuICAgICAgICAgICAgLyppZiB0aGVyZSBpcyBubyBhcHBvb250bWVudCBzbyB0aGVyIGlzIG5vIHNjaGVkIGlmIHRoZSBpcyBubyBzZWNoIHNvIGNyZWF0ZSBkZWZ1bHQqL1xyXG4gICAgICAgICAgICAvKmdldCB0aGUgc3RhcnQgZGF5IGFuZCB0aGUgZW5kIG9mIHdvcmtpbmcgaG91cnMqL1xyXG4gICAgICAgICAgICAvKmNoZWtpbmcgaWYgdGhlIGFwcG9pbnRtZW50IGlzIHRha2VuKi9cclxuICAgICAgICAgICAgaWYoZGF0ZSA8IGN1cnJlbnREYXRlKXtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IHNldCBhcHBvaW50bWVudFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCB2YWxpZFRpbWUgPSBjaGVja1ZhbGlkVGltZShzY2hlZHVsZSxzdGFydFRpbWUsZm9ybWF0dGVkRW5kVGltZSk7XHJcbiAgICAgICAgICAgIGlmKHZhbGlkVGltZSAhPSB0cnVlKXtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRpbWUgaXMgbm90IHZhbGlkXCIpOyAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgYXBwb2ludG1lbnRzID0gc2NoZWR1bGUudGFrZW5Ib3Vycy5hcHBvaW50bWVudHM7XHJcbiAgICAgICAgICAgIC8qZm9ybWF0ZWQgdG8gYmUgYWJsZSB0byBjb21wYXJlKi9cclxuICAgICAgICAgICAgaWYobmV3QXBwRm9ybWF0ZWRTdGFydFRpbWUgPCBjdXJyZW50RGF0ZSl7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBzZXQgYXBwb2ludG1lbnRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgaXNUYWtlbiA9IGNoZWNrVGFrZW5UaW1lKGFwcG9pbnRtZW50cyxuZXdBcHBGb3JtYXRlZFN0YXJ0VGltZSxuZXdBcHBGb3JtYXRlZEVuZFRpbWUpO1xyXG4gICAgICAgICAgICBpZihpc1Rha2VuICE9IHRydWUpe1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXBwb2ludG1lbnQgaXMgdGFrZW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgYXBwb2ludG1lbnRJZCA9IG5ldyBPYmplY3RJZCgpO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdBcHBvaW50bWVudCA9IGNyZWF0ZU5ld0FwcG9pbnRtZW50U2NoZWR1bGVGb3JtYXQobmV3QXBwRm9ybWF0ZWRTdGFydFRpbWUsZHVyYXRpb24sYXBwb2ludG1lbnRJZCk7XHJcbiAgICAgICBcclxuICAgICAgICAgICAgYXBwb2ludG1lbnRzLnB1c2gobmV3QXBwb2ludG1lbnQpO1xyXG4gICAgICAgICAgICBhcHBvaW50bWVudHMuc29ydCgpO1xyXG4gICAgICAgICAgICBzY2hlZHVsZS50YWtlbkhvdXJzLmFwcG9pbnRtZW50cyA9IGFwcG9pbnRtZW50cztcclxuICAgICAgICAgICAgaWYoZGVmdWx0Q3JlYXRlKXtcclxuICAgICAgICAgICAgICAgIHNjaGVkdWxlLnNhdmUoKTtcclxuICAgICAgICAgICAgICAgIGRlZnVsdENyZWF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmVzLnNlbmQobmV3QXBwb2ludG1lbnQuYXBwb2ludG1lbnRJZCk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgc2NoZWRSZXBvLnVwZGF0ZVNjaGVkdWxlVmFsdWVUd29LZXlzKHNjaGVkdWxlLl9pZCxcInRha2VuSG91cnNcIixcImFwcG9pbnRtZW50c1wiLGFwcG9pbnRtZW50cyk7XHJcbiAgICAgICAgICAgICAgICByZXMuc2VuZChuZXdBcHBvaW50bWVudC5hcHBvaW50bWVudElkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgYXBwb2ludG1lbnQgZGF0YTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBhc3luYyByZVNjaGVkdWxlTmV3QXBwb2ludG1lbnQocmVxLCByZXMpIFxyXG4gICAge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBuZXdBcHBvaW50bWVudCA9IHJlcS5ib2R5Lm5ld1Jlc2NoZWR1bGVBcHBvaW50bWVudDtcclxuICAgICAgICAgICAgY29uc3QgYXBwb2ludG1lbnRJZFRvRmluZCA9IG5ldyBPYmplY3RJZChuZXdBcHBvaW50bWVudC5hcHBvaW50bWVudElkKTtcclxuICAgICAgICAgICAgY29uc3Qgb2xkRGF0ZSA9IHJlcS5ib2R5Lm9sZERhdGU7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBuZXdBcHBvaW50bWVudC5kYXRlO1xyXG4gICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBuZXdBcHBvaW50bWVudC5zdGFydFRpbWU7XHJcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBuZXdBcHBvaW50bWVudC50eXBlO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdBcHBGb3JtYXR0ZWRTdGFydFRpbWUgPSBjb21iaW5lRGF0ZUFuZEhvdXJzVG9EYXRlKHN0YXJ0VGltZSwgZGF0ZVN0cik7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0FwcEZvcm1hdHRlZEVuZFRpbWUgPSBjYWxjdWxhdGVEdXJhdGlvbihzdGFydFRpbWUsIHR5cGUsIGRhdGVTdHIpO1xyXG4gICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRFbmRUaW1lID0gZ2V0Rm9ybWF0dGVkRGF0ZUVuZFRpbWUobmV3QXBwRm9ybWF0dGVkRW5kVGltZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgY29uc3QgX29sZERhdGUgPSBuZXcgRGF0ZShvbGREYXRlKTtcclxuICAgICAgICAgICAgY29uc3Qgc2NoZWR1bGVEYXRlID0gbmV3IERhdGUoZGF0ZVN0cik7XHJcbiAgICAgICAgICAgIGxldCBzY2hlZHVsZSA9IGF3YWl0IGdldFNjaGVkdWxlQnlEYXRlKHNjaGVkdWxlRGF0ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzSW5TY2hlZHVsZSA9IGlzQXBwb2ludG1lbnRJZEluU2NoZWR1bGUoYXBwb2ludG1lbnRJZFRvRmluZCwgc2NoZWR1bGUpO1xyXG4gICAgICAgICAgICBjb25zdCBpc1Bhc3REYXRlID0gc2NoZWR1bGVEYXRlIDwgY3VycmVudERhdGU7XHJcbiAgICAgICAgICAgIGlmIChpc0luU2NoZWR1bGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc1Bhc3REYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3Qgc2V0IGFwcG9pbnRtZW50IGZvciBwYXN0IGRhdGVzXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGlzVmFsaWRUaW1lID0gY2hlY2tWYWxpZFRpbWUoc2NoZWR1bGUsIG5ld0FwcEZvcm1hdHRlZFN0YXJ0VGltZSwgZm9ybWF0dGVkRW5kVGltZSk7ICAgXHJcbiAgICAgICAgICAgIGlmICghaXNWYWxpZFRpbWUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFwcG9pbnRtZW50IHRpbWUgaXMgaW52YWxpZCBvciBhbHJlYWR5IHRha2VuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCB1cGRhdGVkQXBwb2ludG1lbnRzID0gc2NoZWR1bGUudGFrZW5Ib3Vycy5hcHBvaW50bWVudHM7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzVGFrZW4gPSBjaGVja1Rha2VuVGltZSh1cGRhdGVkQXBwb2ludG1lbnRzLCBuZXdBcHBGb3JtYXR0ZWRTdGFydFRpbWUsIG5ld0FwcEZvcm1hdHRlZEVuZFRpbWUpO1xyXG4gICAgICAgICAgICBpZiAoIWlzVGFrZW4pIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFwcG9pbnRtZW50IGlzIHRha2VuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKnJlbW92ZSBmcm9tIG9sZCBTY2hlZHVsZSAqL1xyXG4gICAgICAgICAgICAgICAgLypVcGRhdGUgYXBwb2ludG1lbnQqLyBcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Jlc2NoZWR1bGVkQXBwb2ludG1lbnQgPSBjcmVhdGVOZXdBcHBvaW50bWVudFNjaGVkdWxlRm9ybWF0KG5ld0FwcEZvcm1hdHRlZFN0YXJ0VGltZSwgZHVyYXRpb24sIGFwcG9pbnRtZW50SWRUb0ZpbmQpO1xyXG4gICAgICAgICAgICAgICAgc2NoZWR1bGUudGFrZW5Ib3Vycy5hcHBvaW50bWVudHMgPSB1cGRhdGVkQXBwb2ludG1lbnRzO1xyXG4gICAgICAgICAgICAgICAgc2NoZWR1bGUudGFrZW5Ib3Vycy5hcHBvaW50bWVudHMucHVzaChuZXdSZXNjaGVkdWxlZEFwcG9pbnRtZW50KTtcclxuICAgICAgICAgICAgICAgIHNjaGVkdWxlLnRha2VuSG91cnMuYXBwb2ludG1lbnRzLnNvcnQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChkZWZ1bHRDcmVhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY2hlZFJlcG8ucmVtb3ZlQXBwb2ludG1lbnRGcm9tU2NoZWR1bGVCeUF0dHJpYnV0ZUFwcG9pbnRtZW50SWQoYXBwb2ludG1lbnRJZFRvRmluZCwgX29sZERhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNjaGVkdWxlLnNhdmUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyp1cGRhdGUgbmV3IFNjaGVkdWxlKi9cclxuICAgICAgICAgICAgICAgICAgICBzY2hlZFJlcG8ucmVtb3ZlQXBwb2ludG1lbnRGcm9tU2NoZWR1bGVCeUF0dHJpYnV0ZUFwcG9pbnRtZW50SWQoYXBwb2ludG1lbnRJZFRvRmluZCwgX29sZERhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNjaGVkUmVwby51cGRhdGVTY2hlZHVsZVZhbHVlVHdvS2V5cyhzY2hlZHVsZS5faWQsIFwidGFrZW5Ib3Vyc1wiLCBcImFwcG9pbnRtZW50c1wiLCB1cGRhdGVkQXBwb2ludG1lbnRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHRydWUpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlc2NoZWR1bGluZyBhcHBvaW50bWVudDonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBhc3luYyBjYW5jZWxBcHBvaW50bWVudEJ5SWQocmVxLCByZXMpIFxyXG4gICAge1xyXG4gICAgICAgIHRyeXtcclxuICAgICAgICAgICAgY29uc3QgYXBwb2ludG1lbnQgPSAgcmVxLmJvZHk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFwcG9pbnRtZW50SWQgPSBuZXcgT2JqZWN0SWQoYXBwb2ludG1lbnQuYXBwb2ludG1lbnRJZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShhcHBvaW50bWVudC5kYXRlKTtcclxuICAgICAgICAgICAgY29uc3QgaXNEZWxldGVkID0gIGF3YWl0IHNjaGVkUmVwby5yZW1vdmVBcHBvaW50bWVudEZyb21TY2hlZHVsZUJ5QXR0cmlidXRlQXBwb2ludG1lbnRJZChhcHBvaW50bWVudElkLCBkYXRlKTtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoaXNEZWxldGVkKTtcclxuICAgICAgICB9Y2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhbmNlbGluZyBhcHBvaW50bWVudDonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbn07XHJcbmZ1bmN0aW9uIGlzQXBwb2ludG1lbnRJZEluU2NoZWR1bGUoYXBwb2ludG1lbnRJZFRvRmluZCwgc2NoZWR1bGUpIHtcclxuICAgIHJldHVybiBzY2hlZHVsZS50YWtlbkhvdXJzLmFwcG9pbnRtZW50cy5zb21lKGFwcG9pbnRtZW50ID0+IGFwcG9pbnRtZW50LmFwcG9pbnRtZW50SWQuZXF1YWxzKGFwcG9pbnRtZW50SWRUb0ZpbmQpKTtcclxufVxyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFNjaGVkdWxlQnlEYXRlIChuZXdEYXRlKVxyXG57XHJcbiAgICBjb25zdCBkYXkgPSBuZXdEYXRlLmdldERhdGUoKTtcclxuICAgIGNvbnN0IG1vbnRoID0gbmV3RGF0ZS5nZXRNb250aCgpICsgMTtcclxuICAgIGNvbnN0IHllYXIgPSBuZXdEYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICBsZXQgc2NoZWR1bGUgPSBhd2FpdCBzY2hlZFJlcG8uZmluZEJ5RGF5TW9udGhZZWFyKGRheSwgbW9udGgsIHllYXIpO1xyXG4gICAgLyppZiB0aGUgc2NoZWR1bGUgaXMgZXhzaXN0Ki9cclxuICAgIGlmIChzY2hlZHVsZSA9PT0gbnVsbCkge1xyXG4gICAgICAgIHNjaGVkdWxlID0gY3JlYXRlRGVmdWx0U2NoZWR1bGUoZGF5LG1vbnRoLHllYXIpO1xyXG4gICAgICAgIGRlZnVsdENyZWF0ZSA9IHRydWU7XHJcbiAgICB9IFxyXG4gICAgcmV0dXJuIHNjaGVkdWxlO1xyXG59XHJcbmZ1bmN0aW9uIGNoZWNrVmFsaWRUaW1lKHNjaGVkdWxlLHN0YXJ0VGltZSxmb3JtYXR0ZWRFbmRUaW1lKXtcclxuICAgIGNvbnN0IHsgc3RhcnRUaW1lOiBkZWZzU3RhcnRUaW1lLCBlbmRUaW1lOiBkZWZFbmRUaW1lIH0gPSBzY2hlZHVsZS53b3JraW5nSG91cnM7XHJcbiAgICBpZiAoc3RhcnRUaW1lIDwgZGVmc1N0YXJ0VGltZSB8fCBmb3JtYXR0ZWRFbmRUaW1lID4gZGVmRW5kVGltZSB8fChmb3JtYXR0ZWRFbmRUaW1lID49ICcwMDowMCcgJiYgZm9ybWF0dGVkRW5kVGltZSA8ICcwNTowMCcpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3Qgc2V0IGFwcG9pbnRtZW50XCIpO1xyXG4gICAgfVxyXG5yZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBjaGVja1Rha2VuVGltZShhcHBvaW50bWVudHMsIG5ld0FwcEZvcm1hdGVkU3RhcnRUaW1lLCBuZXdBcHBGb3JtYXRlZEVuZFRpbWUpIHtcclxuICAgIGNvbnN0IG5ld1N0YXJ0VGltZSA9IG1vbWVudChuZXdBcHBGb3JtYXRlZFN0YXJ0VGltZSwgXCJZWVlZLU1NLUREVEhIOm1tOnNzWlwiKTtcclxuICAgIGNvbnN0IG5ld0VuZFRpbWUgPSBtb21lbnQobmV3QXBwRm9ybWF0ZWRFbmRUaW1lLCBcIllZWVktTU0tRERUSEg6bW06c3NaXCIpO1xyXG4gICAgZm9yIChjb25zdCB0YWtlblRpbWUgb2YgYXBwb2ludG1lbnRzKSB7XHJcbiAgICAgICAgY29uc3QgeyBzdGFydEFwcG9pbnRtZW50LCBkdXJhdGlvbiB9ID0gdGFrZW5UaW1lO1xyXG4gICAgICAgIGNvbnN0IGVuZFRpbWUgPSBtb21lbnQoc3RhcnRBcHBvaW50bWVudCwgXCJZWVlZLU1NLUREVEhIOm1tOnNzWlwiKS5hZGQoZHVyYXRpb24sICdob3VycycpO1xyXG4gICAgICAgIGlmIChuZXdTdGFydFRpbWUuaXNCZWZvcmUoZW5kVGltZSkgJiYgbmV3RW5kVGltZS5pc0FmdGVyKHN0YXJ0QXBwb2ludG1lbnQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFwcG9pbnRtZW50IGlzIHRha2VuXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIGdldEZvcm1hdHRlZERhdGVFbmRUaW1lKG5ld0FwcEZvcm1hdGVkRW5kVGltZSl7XHJcbiAgICBjb25zdCBob3VycyA9IG5ld0FwcEZvcm1hdGVkRW5kVGltZS5nZXRVVENIb3VycygpO1xyXG4gICAgY29uc3QgbWludXRlcyA9IG5ld0FwcEZvcm1hdGVkRW5kVGltZS5nZXRVVENNaW51dGVzKCk7XHJcbiAgICBjb25zdCBmb3JtYXR0ZWRIb3VycyA9IGhvdXJzIDwgMTAgPyAnMCcgKyBob3VycyA6IGhvdXJzO1xyXG4gICAgY29uc3QgZm9ybWF0dGVkTWludXRlcyA9IG1pbnV0ZXMgPCAxMCA/ICcwJyArIG1pbnV0ZXMgOiBtaW51dGVzO1xyXG4gICAgY29uc3QgZm9ybWF0dGVkRW5kVGltZSA9IGAke2Zvcm1hdHRlZEhvdXJzfToke2Zvcm1hdHRlZE1pbnV0ZXN9YDtcclxuICAgIHJldHVybiBmb3JtYXR0ZWRFbmRUaW1lXHJcbn1cclxuZnVuY3Rpb24gY29tYmluZURhdGVBbmRIb3Vyc1RvRGF0ZSh0aW1lLF9kYXRlKVxyXG57XHJcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoX2RhdGUpO1xyXG4gICAgY29uc3QgW3N0YXJ0SG91ciwgc3RhcnRNaW51dGVdID0gdGltZS5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xyXG4gICAgZGF0ZS5zZXRVVENIb3VycyhzdGFydEhvdXIpO1xyXG4gICAgZGF0ZS5zZXRVVENNaW51dGVzKHN0YXJ0TWludXRlKTtcclxuICAgIGNvbnN0IG5ld0RhdGUgPSBuZXcgRGF0ZShkYXRlKTtcclxuICAgIHJldHVybiBuZXdEYXRlO1xyXG59XHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUR1cmF0aW9uKHN0YXJ0VGltZSwgdHlwZSwgX2RhdGUpIHtcclxuICAgIGR1cmF0aW9uID0gZ2V0RHVyYXRpb25CeVR5cGUodHlwZSk7IC8vIER1cmF0aW9uIGluIG1pbGxpc2Vjb25kc1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKF9kYXRlKTtcclxuICAgIGNvbnN0IFtzdGFydEhvdXIsIHN0YXJ0TWludXRlXSA9IHN0YXJ0VGltZS5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xyXG4gICAgZGF0ZS5zZXRVVENIb3VycyhzdGFydEhvdXIpO1xyXG4gICAgZGF0ZS5zZXRVVENNaW51dGVzKHN0YXJ0TWludXRlKTtcclxuICAgIGNvbnN0IGVuZFRpbWUgPSBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSArIGR1cmF0aW9uKTtcclxuICAgIGR1cmF0aW9uID0gKGR1cmF0aW9uLzEwMDAvNjAvNjApO1xyXG4gICAgcmV0dXJuIGVuZFRpbWU7XHJcbn1cclxuZnVuY3Rpb24gYWRkSG91cnNUb0RhdGUoZGF0ZVN0cmluZywgaG91cnMpIHtcclxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKTtcclxuICAgIGRhdGUuc2V0SG91cnMoZGF0ZS5nZXRIb3VycygpICsgaG91cnMpO1xyXG4gICAgcmV0dXJuIGRhdGUudG9JU09TdHJpbmcoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RHVyYXRpb25CeVR5cGUodHlwZSkge1xyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgY2FzZSBFbnVtVHlwZS5WQUxVRTE6XHJcbiAgICAgICAgICAgIHJldHVybiAyICogNjAgKiA2MCAqIDEwMDA7IC8vIDIgaG91cnMgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICAgICAgY2FzZSBFbnVtVHlwZS5WQUxVRTI6XHJcbiAgICAgICAgICAgIHJldHVybiAzICogNjAgKiA2MCAqIDEwMDA7XHJcbiAgICAgICAgY2FzZSBFbnVtVHlwZS5WQUxVRTM6XHJcbiAgICAgICAgICAgIHJldHVybiAxICogNjAgKiA2MCAqIDEwMDA7IC8vIDEgaG91ciBpbiBtaWxsaXNlY29uZHNcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gMDsgLy8gRGVmYXVsdCBkdXJhdGlvblxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZURlZnVsdFNjaGVkdWxlKF9kYXksX21vbnRoLF95ZWFyKXtcclxuICAgIGNvbnN0IG5ld1NjaGVkdWxlID0gbmV3IFNjaGVkdWxlKHtcclxuICAgICAgICBzY2hlZHVsZUlkOiBuZXcgT2JqZWN0SWQoKSxcclxuICAgICAgICBkYXk6IF9kYXksXHJcbiAgICAgICAgbW9udGg6IF9tb250aCxcclxuICAgICAgICB5ZWFyOiBfeWVhcixcclxuICAgICAgICB3b3JraW5nSG91cnM6IHtcclxuICAgICAgICAgICAgc3RhcnRUaW1lOiAnMDk6MDAnLFxyXG4gICAgICAgICAgICBlbmRUaW1lOiAnMTg6MDAnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0YWtlbkhvdXJzOiB7XHJcbiAgICAgICAgICAgIGFwcG9pbnRtZW50czogW3tcclxuICAgICAgICAgICAgICAgIHN0YXJ0QXBwb2ludG1lbnQ6IG5ldyBEYXRlKCkuc2V0SG91cnMoOSwgMCwgMCksXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMCxcclxuICAgICAgICAgICAgICAgIGFwcG9pbnRtZW50SWQ6IG5ldyBPYmplY3RJZCgpXHJcbiAgICAgICAgICAgIH1dXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gbmV3U2NoZWR1bGU7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlTmV3QXBwb2ludG1lbnRTY2hlZHVsZUZvcm1hdChuZXdBcHBGb3JtYXRlZFN0YXJ0VGltZSxkdXJhdGlvbiwgYXBwb2ludG1lbnRJZCl7XHJcbiAgICBjb25zdCBuZXdBcHBvaW50bWVudCA9IHtcclxuICAgICAgICBzdGFydEFwcG9pbnRtZW50OiBuZXdBcHBGb3JtYXRlZFN0YXJ0VGltZSxcclxuICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24gLFxyXG4gICAgICAgIGFwcG9pbnRtZW50SWQ6IGFwcG9pbnRtZW50SWRcclxuICAgIH07XHJcbiAgICByZXR1cm4gbmV3QXBwb2ludG1lbnQ7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoic2pnQkFlWTtBQUFBQSxhQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGFBQUEsR0FmWixLQUFNLENBQUFFLGtCQUFrQixFQUFBRixhQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFDLG1DQUFtQyxDQUFDLEVBQ3ZFLEtBQU0sQ0FBQUMsUUFBUSxFQUFBTCxhQUFBLEdBQUFHLENBQUEsTUFBR0MsT0FBTyxDQUFD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