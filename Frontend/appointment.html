
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Ezwait - calendar</title>
  <!-- Bootstrap Styles-->
  <!-- FontAwesome Styles-->
  <!-- Custom Styles-->
  <!-- <link rel="stylesheet" type="text/css" href="./css/style.css"> -->
  <!-- Google Fonts-->
  <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="hhttps://ezwait.onrender.com/Front/style.css" rel="stylesheet"  type='text/css'>
    <script type="module" src="https://ezwait.onrender.com.com/front/js/APIpaths.js"></script>
    <script type="module" src="https://ezwait.onrender.com.com/front/js/APIpaths.js"></script>

  <!-- <script src="./js/appointment.js"></script> -->

</head>
<body>
    <div id="wrapper" style="zoom: 67%;">
      <nav class="navbar navbar-default top-navbar" role="navigation">
        <div class="navbar-header">
          <a class="navbar-brand" href="index.html"><img src="./img/Group 20.png" alt="Logof" class="logof"></a>
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        </ul>
        <button type="button" class="btn btn-primary">Danielle Bernstein</button>
      </nav>
      <!--/. NAV TOP  -->
      <nav class="navbar-default navbar-side" role="navigation">
        <div class="sidebar-collapse">
            <ul class="nav" id="main-menu">
                <li><a href="index.html"><img src="./img/appointment.png" alt="Logo" class="logo"></i></a></li>
                <li id="customersLink"><a href="CustomerList.html"><img src="./img/customers2.png" alt="Logo" class="logo"></i></a></li>
                </li>
                <li><a href="SendMessege.html"><img src="./img/communication2.png" alt="Logo" class="logo"></i></a>
            </li>
                <li><a href="profilePage.html"><img src="./img/Services.png" alt="Logo" class="logo"></i></a></li>
                <li><a href="signIn.html"><img src="./img/Logout.png" alt="Logo" class="logo"></i></a></li>
            </ul>
        </div>
    </nav>
      <!-- /. NAV SIDE  -->
      <div id="page-wrapper">
        <div id="page-inner" style="zoom: 120%;">
            <div>
              <div class="tab">
                <button class="tablinks" onclick="openCity(event, 'Upcoming')" id="defaultOpen" name="upcoming_click">Upcoming</button>
                <button class="tablinks" onclick="openCity(event, 'Completed')" name="completed_click">Completed</button>
                <button class="tablinks" onclick="openCity(event, 'Cancelled')" name="cancelled_click">Cancelled</button>
                </div>
                <div class="lg:grid lg:grid-cols-12 lg:gap-x-16" id="Upcoming" class="tabcontent">
                   <div class="mt-10 text-center lg:col-start-8 lg:col-end-13 lg:row-start-1 lg:mt-9 xl:col-start-9">
    <div class="flex items-center text-gray-900">
      <button type="button" onclick="changeMonth(-1)" class="-m-1.5 flex flex-none items-center justify-center p-1.5 text-gray-400 hover:text-gray-500">
        <span class="sr-only">Previous month</span>
        <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" />
        </svg>
      </button>
      <div class="flex-auto text-sm font-semibold" id="currentMonth">March</div>
      <button type="button" onclick="changeMonth(1)" class="-m-1.5 flex flex-none items-center justify-center p-1.5 text-gray-400 hover:text-gray-500">
        <span class="sr-only">Next month</span>
        <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
        </svg>
      </button>
    </div>
    <div class="mt-6 grid grid-cols-7 text-xs leading-6 text-gray-500">
      <div>S</div>
      <div>M</div>
      <div>T</div>
      <div>W</div>
      <div>T</div>
      <div>F</div>
      <div>S</div>
    </div>
    <div id="calendarGrid" class="isolate mt-2 grid grid-cols-7 gap-px rounded-lg bg-gray-200 text-sm shadow ring-1 ring-gray-200">
      
    </div>
 <!-- <div class="start-btn">
                    <a href="#" class="mt-8 w-full rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600" onclick="toggleModal()">Add Appointment</a>
                </div> -->
                <button type="button" class="mt-8 w-full rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600" onclick="toggleModal()" href="#">Add Appointment</button>
           
                <style>
                  /* Your CSS styles here */
                  .selected-date {
                    background-color: #6b46c1; /* Change this color as needed */
                    color: white;
                  }
                  @media (min-width: 1024px){

.lg\:grid {
    display: block;}
}
                </style>
                    </div>
                  <!-- <ul class="list list-inline" id="appointmentsList"> -->
                    <ol class="mt-4 divide-y divide-gray-100 text-sm leading-6 lg:col-span-7 xl:col-span-8" id="appointmentsList">
                      
                      
                      </ol>
                      </div>
                      </div>
                      <div class="center modal-box hidden" id="shir">
                        <div class="fa fa-close"  onclick="toggleModal()"><img src="./img/close.png"></div>
                        <div class="form_container">
                          <form name="form" >
                            <div class="w-full sm:w-half formbold-px-3">
                                <div class="formbold-mb-5 w-full">
                                    <label for="type" class="formbold-form-label">Client full name</label>
                                    <select class="formbold-form-input" name="shir" id="select">
                                   
                                    </select>
                                    </label>
                                </div>
                                <div class="formbold-mb-5">
                                    <label for="type" class="formbold-form-label"> Type </label>
                                    <select class="formbold-form-input" name="din" id="din">
                                        <option value="1">value2</option>
                                        <option value="2">value2</option>
                                        <option value="3">value3</option>    
                                    </select>
                                    </label>
                                </div>
                            </div>
                            <div class="form_wrap">
                                <div class="w-full sm:w-half formbold-px-3">
                                    <div class="formbold-mb-5 w-full">
                                        <label for="date" class="formbold-form-label">Date</label>
                                        <input type="date" name="date" id="nave" class="formbold-form-input"  />
                                    </div>
                                </div>
                            </div>
                            <div class="w-full sm:w-half formbold-px-3">
                                <div class="formbold-mb-5">
                                    <label for="time" class="formbold-form-label">Time</label>
                                    <input type="time" name="time" id="tomer" class="formbold-form-input"  />
                                </div>
                            </div>
                            
                            <button class="formbold-btn" name="form_submit">Submit</button>
                            </div>
                            </form>
                          </div>
                  </div>
               
              <script>

                function openEventModal() {
                  var formContainer = document.querySelector('.form_container');
                  formContainer.style.display = 'block';
                }
           
    const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
    let currentMonthIndex = months.indexOf(document.getElementById('currentMonth').innerText);

    function updateCalendarGrid(selectedMonthIndex) {
      const calendarGrid = document.getElementById('calendarGrid');
      const daysInMonth = new Date(new Date().getFullYear(), selectedMonthIndex + 1, 0).getDate();
      const firstDayOfMonth = new Date(new Date().getFullYear(), selectedMonthIndex, 1).getDay();
      calendarGrid.innerHTML = '';

      for (let i = 0; i < firstDayOfMonth; i++) {
        const emptyButton = document.createElement('button');
        emptyButton.setAttribute('type', 'button');
        emptyButton.classList.add('bg-gray-50', 'py-1.5', 'text-gray-400', 'focus:z-10');
        calendarGrid.appendChild(emptyButton);
      }

      for (let i = 1; i <= daysInMonth; i++) {
        const dayButton = document.createElement('button');
        dayButton.setAttribute('type', 'button');
        dayButton.setAttribute('id', 'dayButton');
        dayButton.classList.add('bg-white', 'py-1.5', 'text-gray-900', 'hover:bg-purple-600', 'focus:z-10');
        dayButton.innerHTML = `<time datetime="${new Date().getFullYear()}-${selectedMonthIndex + 1}-${i}" class="mx-auto flex h-7 w-7 items-center justify-center rounded-full">${i}</time>`;
        
        // Attach an event listener to each date button
        dayButton.addEventListener('click', function() {
          // Remove previously selected date
          const selectedDateButton = document.querySelector('.selected-date');
          if (selectedDateButton) {
            selectedDateButton.classList.remove('selected-date');
          }

          // Mark the selected date
          dayButton.classList.add('selected-date');

          const selectedDate = `${new Date().getFullYear()}-${selectedMonthIndex + 1}-${i}`;
          const value = getValueForDate(selectedDate);
          console.log(`Value for ${selectedDate}: ${value}`);
          // Do something with the value, e.g., display it somewhere
        });

        calendarGrid.appendChild(dayButton);
      }
    }

    // Define your date-value mapping here
    const dateValues = {
      "2024-03-01": "Value for March 1, 2024",
      "2024-03-03": "Value for March 3, 2024",
      // Add more dates and values as needed
    };

    function getValueForDate(date) {
      return dateValues[date] || "No value available for selected date.";
    }

    updateCalendarGrid(currentMonthIndex);

    function changeMonth(offset) {
      currentMonthIndex = (currentMonthIndex + offset + months.length) % months.length;
      document.getElementById('currentMonth').innerText = months[currentMonthIndex];
      updateCalendarGrid(currentMonthIndex);
    }

                function openCity(evt, cityName) {
                var i, tabcontent, tablinks;
                tabcontent = document.getElementsByClassName("tabcontent");
                for (i = 0; i < tabcontent.length; i++) {
                    tabcontent[i].style.display = "none";
                }
                tablinks = document.getElementsByClassName("tablinks");
                for (i = 0; i < tablinks.length; i++) {
                    tablinks[i].className = tablinks[i].className.replace(" active", "");
                }
                document.getElementById(cityName).style.display = "block";
                evt.currentTarget.className += " active";
            }

                // Define the toggleModal function
function toggleModal() {
    var modal = document.getElementById('shir');
    modal.classList.toggle('hidden');
}
fetch(`${URL}/user/getUserData`)
    .then(response => response.json())
    .then(data => {
        const usertype = data.type;
        console.log("printusertype", usertype);

        if (usertype === 'user') {
            console.log(usertype === 'user');
            // If user is not admin, hide the Customers link
            const customersLink = document.getElementById('customersLink');
            customersLink.style.display = 'none';
            
// Assume you have an array of usernames fetched from the database
const firstNameString = String(data.firstName);
const lastNameString = String (data.lastName);
// const subclient1= String(data.subclient.subfirstName);
const usernames = [`${firstNameString} ${lastNameString}`,];
// Get the select element
const selectElement = document.getElementById('select');
// Create and append an option element for each username
usernames.forEach(username => {
    const option = document.createElement('option');
    option.text = username;
    option.value = username;
    selectElement.add(option);
});
        } else if (usertype === 'admin') {
            console.log(usertype === 'admin');
            // Fetch clients from the database if user is admin
            fetch(`${URL}/profile/Allprofile`)
                .then(response => response.json())
                .then(profiles => {
                  console.log("allclient",profiles);
                  
                    // Get the container where you want to display the clients
                    // Clear existing content
                    // container.innerHTML = '';
                    const selectElement = document.getElementById('select');
                    // Create and append elements to display each client
                    
                    profiles.forEach(profile => {
                      const profilefirstString = String(profile.firstName);
                  const profilelastString = String (profile.lastName);
                      console.log(profile);
                      const profileName =[`${profilefirstString} ${profilelastString}`,];
                      profileName.forEach(profileName => {
                      const option = document.createElement('option');
                      option.textContent = profileName;
                        option.value = profileName;
                        selectElement.add(option);
                      })
                    });
                })
                .catch(error => console.error('Error fetching profiles:', error));
        }
    })
    .catch(error => console.error('Error fetching user data:', error));



              // response.forEach(function(data) {
              //   // Create an <option> element for each user name and append it to the <select> element
              //   $('#select').append($('<option>', {
              //       value: data.userName,
                  
                //     text: userName
                // }));
            // });
             
                // Update HTML elements with user details
             

        // Set the value of the input field with id "inputField"

            // firstNameInput.value = String(data.firstName); // Convert to string and set value
              // firstNameInput.textContent =String(data.firstName);
            // console.error('Element with ID "firstName" not found in the document');
        




              </script>
        </body>
</html>
